{layout '../@layout.latte'}
{block content}
    {varType Nette\Database\Table\GroupedSelection|\Nette\Database\Table\ActiveRow[] $postContacts}
    {varType int $personId}
    {if count($postContacts)}
        {foreach $postContacts as $row}
            {var FKSDB\Models\ORM\Models\PostContactModel $postContact = FKSDB\Models\ORM\Models\PostContactModel::createFromActiveRow($row)}
            {var $address = $postContact->address}
            <h3 class="card-header">
                {if $postContact->type == 'P'}
                    {_'Permanent address'}
                {else}
                    {_'Delivery address'}
                {/if}
            </h3>
            <div class="card-body">
                {if isset($address->first_row)}
                    <div>{$address->first_row}</div>
                {/if}
                {if isset($address->second_row)}
                    <div>{$address->second_row}</div>
                {/if}
                {if isset($address->target)}
                    <div>{$address->target}</div>
                {/if}
                {if isset($address->city)}
                    <div>{$address->city}</div>
                {/if}
                {if isset($address->postal_code)}
                    <div>{$address->postal_code}</div>
                {/if}
                {if isset($address->region_id)}
                    <div>{$address->region->name}</div>
                {/if}
            </div>

        {/foreach}
        <hr/>
        <div class="card-body">
            <a class="card-link"
               href="{plink :Org:Envelope:output personIds=>[$personId]}">{_'Create envelope'}</a>
        </div>
    {else}
        {control noRecords}
    {/if}
{/block}
